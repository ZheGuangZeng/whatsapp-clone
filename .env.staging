# WhatsApp Clone Staging Environment Configuration
# This file contains staging configuration for testing production-like scenarios

# Environment
ENVIRONMENT=staging
APP_NAME=WhatsApp Clone (Staging)
APP_VERSION=1.0.0-staging

# Regional Configuration
REGION=ap-southeast-1
SECONDARY_REGION=ap-northeast-1

# Staging Supabase Configuration - Singapore
SUPABASE_URL=https://your-staging-project-sg.supabase.co
SUPABASE_ANON_KEY=your-staging-supabase-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-staging-service-role-key-here

# Staging Supabase Configuration - Japan (for multi-region testing)
SUPABASE_URL_SECONDARY=https://your-staging-project-jp.supabase.co
SUPABASE_ANON_KEY_SECONDARY=your-japan-staging-anon-key-here
SUPABASE_SERVICE_ROLE_KEY_SECONDARY=your-japan-staging-service-role-key-here

# LiveKit Staging Configuration
LIVEKIT_URL=wss://your-staging-domain.livekit.cloud
LIVEKIT_API_KEY=your-staging-livekit-api-key
LIVEKIT_API_SECRET=your-staging-livekit-api-secret

# Domain and CDN Configuration
DOMAIN_NAME=staging.your-domain.com
CDN_URL=https://cdn-staging.your-domain.com
API_BASE_URL=https://api-staging.your-domain.com

# SSL/TLS Configuration
SSL_CERTIFICATE_ARN=arn:aws:acm:us-east-1:123456789012:certificate/your-staging-cert-id
FORCE_HTTPS=true

# Database Configuration (Scaled down for staging)
DATABASE_URL=postgresql://user:password@your-staging-db.amazonaws.com:5432/whatsapp_clone_staging
DATABASE_POOL_SIZE=10
DATABASE_MAX_CONNECTIONS=50
DATABASE_CONNECTION_TIMEOUT=30000

# Redis Configuration
REDIS_URL=redis://your-staging-redis.cache.amazonaws.com:6379
REDIS_PASSWORD=your-redis-staging-password
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20

# Performance Configuration (Less aggressive than production)
CONNECTION_TIMEOUT_MS=15000
READ_TIMEOUT_MS=30000
WRITE_TIMEOUT_MS=30000
MAX_CONCURRENT_CONNECTIONS=500

# Security Configuration
JWT_SECRET=your-staging-jwt-secret-key-here
JWT_EXPIRY=3600
CORS_ORIGINS=https://staging.your-domain.com,https://admin-staging.your-domain.com
RATE_LIMIT_REQUESTS_PER_MINUTE=100
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true

# Monitoring and Logging
ENABLE_ANALYTICS=true
ENABLE_CRASH_REPORTING=true
ENABLE_PERFORMANCE_MONITORING=true
SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/staging-project-id
SENTRY_ENVIRONMENT=staging
SENTRY_RELEASE=1.0.0-staging

# Log Configuration (More verbose for debugging)
ENABLE_LOGGING=true
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_RETENTION_DAYS=7

# Feature Flags (Staging - Enable all features for testing)
ENABLE_VOICE_MESSAGES=true
ENABLE_VIDEO_CALLS=true
ENABLE_GROUP_CALLS=true
ENABLE_FILE_SHARING=true
ENABLE_MESSAGE_REACTIONS=true
ENABLE_MESSAGE_ENCRYPTION=true
ENABLE_OFFLINE_SYNC=true

# Mobile App Configuration
ENABLE_PUSH_NOTIFICATIONS=true
PUSH_NOTIFICATION_SERVICE_URL=https://fcm.googleapis.com/fcm/send
FCM_SERVER_KEY=your-fcm-staging-server-key
APNS_CERTIFICATE_PATH=/path/to/staging/apns/certificate.p12

# Third-party Services
GOOGLE_CLOUD_PROJECT_ID=your-gcp-staging-project-id
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=your-aws-staging-access-key
AWS_SECRET_ACCESS_KEY=your-aws-staging-secret-key

# File Storage Configuration
FILE_STORAGE_BUCKET=whatsapp-clone-staging-files
FILE_STORAGE_REGION=ap-southeast-1
MAX_FILE_SIZE_MB=25
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,mp4,mp3,wav

# Backup Configuration (Less frequent for staging)
BACKUP_SCHEDULE=0 4 * * 0
BACKUP_RETENTION_DAYS=7
BACKUP_ENCRYPTION_KEY=your-staging-backup-encryption-key
BACKUP_S3_BUCKET=whatsapp-clone-staging-backups

# China Optimization (Test environment)
CHINA_CDN_ENABLED=true
CHINA_CDN_URL=https://china-cdn-staging.your-domain.com
CHINA_API_ENDPOINT=https://china-api-staging.your-domain.com
CHINA_SUPABASE_URL=https://your-china-staging-endpoint.supabase.co

# Health Check Configuration
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Auto-scaling Configuration (Scaled down for staging)
MIN_INSTANCES=2
MAX_INSTANCES=20
TARGET_CPU_UTILIZATION=80
TARGET_MEMORY_UTILIZATION=85
SCALE_UP_COOLDOWN=300
SCALE_DOWN_COOLDOWN=600

# Disaster Recovery (Simplified for staging)
DR_ENABLED=false
DR_FAILOVER_THRESHOLD_MINUTES=10
DR_RECOVERY_POINT_OBJECTIVE_MINUTES=30
DR_RECOVERY_TIME_OBJECTIVE_MINUTES=480