# Task #38: 测试文件批量重构

## Description
修复所有测试文件中的属性引用错误，批量更新测试用例以使用新的实体属性名。

## Context
- 大部分的472个错误来自测试文件
- 测试文件使用旧属性名senderId, messageType, timestamp等
- 需要批量修复以确保测试套件正常运行

## Acceptance Criteria
- [ ] 修复所有Message构造函数调用错误
- [ ] 更新属性访问从senderId→userId, messageType→type等
- [ ] 修复时间戳相关测试(timestamp→createdAt)
- [ ] 确保测试逻辑正确性不变
- [ ] 验证所有测试文件编译通过

## Implementation Notes
- 使用批量替换工具提高效率
- 重点关注message_test.dart等核心测试文件
- 保持测试覆盖范围和质量不变
- 验证测试断言逻辑仍然有效

## Estimated Hours: 3

## Dependencies
- Task #36 (实体层标准化)
- Task #37 (服务层同步)

## Definition of Done
- 所有测试文件属性引用正确
- 测试构造函数调用无错误
- 测试逻辑保持完整性